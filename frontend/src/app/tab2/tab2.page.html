<ion-header>
  <ion-toolbar>
    <ion-title>{{ pageTitle }}</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/tab1"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-item>
    <ion-label position="floating">Titel</ion-label>
    <ion-input type="text" [(ngModel)]="taskTitle" required></ion-input>
  </ion-item>

  <ion-item>
    <ion-label position="floating" >Beschreibung</ion-label>
    <ion-textarea [(ngModel)]="taskDescription" rows="5"></ion-textarea>
  </ion-item>

  <ion-item-divider style="margin-top: 15px;">
    <ion-label>Standort auf Karte auswählen</ion-label>
  </ion-item-divider>
  <div style="height: 300px; width: 100%; margin-top: 10px; margin-bottom: 10px; border: 1px solid #ccc;"
       leaflet
       [leafletOptions]="mapOptions" 
       (leafletMapReady)="onMapReady($event)"
       (leafletClick)="onMapClick($event)">
  </div>

  <ion-item>
    <ion-label position="floating">Breitengrad (Latitude)</ion-label>
    <ion-input type="number" [(ngModel)]="taskLatitude"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label position="floating">Längengrad (Longitude)</ion-label>
    <ion-input type="number" [(ngModel)]="taskLongitude"></ion-input>
  </ion-item>

  <ion-button expand="block" (click)="saveTask()" [disabled]="!taskTitle || taskTitle.trim() === ''" style="margin-top: 20px;">
    {{ isEditMode ? 'Änderungen speichern' : 'Aufgabe erstellen' }}
  </ion-button>
</ion-content>